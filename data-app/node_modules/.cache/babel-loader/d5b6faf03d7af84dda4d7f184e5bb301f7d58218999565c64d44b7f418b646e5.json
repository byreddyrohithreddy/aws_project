{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\byred\\\\Downloads\\\\aws-project\\\\data-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { PutObjectCommand, S3Client } from \"@aws-sdk/client-s3\";\nimport { useState } from \"react\";\nimport { nanoid } from \"nanoid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [inputText, setInputText] = useState('');\n  const handleTextInputChange = event => {\n    setInputText(event.target.value);\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    setFile(file);\n  };\n  const uploadFile = async () => {\n    const S3_BUCKET = \"infracdkstack-projects3bucketf7e4afb6-ljf45fw8yyuw\";\n    const REGION = \"us-west-1\";\n    const CREDENTIALS = {\n      accessKeyId: \"AKIARFXZJQECRGPJWSW3\",\n      secretAccessKey: \"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\"\n    };\n    const s3Client = new S3Client({\n      region: REGION,\n      credentials: CREDENTIALS\n    });\n    console.log(file);\n    const command = new PutObjectCommand({\n      Bucket: S3_BUCKET,\n      Key: file.name,\n      Body: file\n    });\n    try {\n      const response = await s3Client.send(command);\n      console.log(response);\n      alert(\"File uploaded successfully.\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to upload file.\");\n    }\n    const API_PATH = 'https://gsnmu8gl3f.execute-api.us-west-1.amazonaws.com/prod/';\n    const dynamoDbData = {\n      id: nanoid(),\n      input_text: inputText,\n      input_file_path: `${S3_BUCKET}/${file.name}`\n    };\n    const response = await fetch(API_PATH, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dynamoDbData)\n    });\n    console.log(response);\n    if (!response.ok) {\n      throw new Error(\"Failed to save data to DynamoDB\");\n    }\n    alert(\"File uploaded and data saved successfully!\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    class: \"flex justify-center items-center h-screen\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      class: \"max-w-md w-full px-4 py-8 bg-white shadow-lg rounded-lg\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"inputText\",\n          class: \"block text-gray-700\",\n          children: \"Text input:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          id: \"inputText\",\n          placeholder: \"Enter text\",\n          class: \"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\",\n          value: \"{inputText}\",\n          onchange: \"{handleTextInputChange}\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"mt-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"label\", {\n          htmlFor: \"fileInput\",\n          class: \"block text-gray-700\",\n          children: \"File input:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 9\n        }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"file\",\n          id: \"fileInput\",\n          accept: \".txt\",\n          onchange: \"{handleFileChange}\",\n          class: \"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 89,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        class: \"mt-4\",\n        children: /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          onclick: \"{uploadFile}\",\n          class: \"inline-block bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\",\n          children: \"Upload\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 97,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"1gXZcAHTgom0+pXkzYUjvMwzM18=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["PutObjectCommand","S3Client","useState","nanoid","jsxDEV","_jsxDEV","App","_s","file","setFile","inputText","setInputText","handleTextInputChange","event","target","value","handleFileChange","e","files","uploadFile","S3_BUCKET","REGION","CREDENTIALS","accessKeyId","secretAccessKey","s3Client","region","credentials","console","log","command","Bucket","Key","name","Body","response","send","alert","err","error","API_PATH","dynamoDbData","id","input_text","input_file_path","fetch","method","headers","body","JSON","stringify","ok","Error","class","children","htmlFor","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onchange","accept","onclick","_c","$RefreshReg$"],"sources":["C:/Users/byred/Downloads/aws-project/data-app/src/App.js"],"sourcesContent":["\nimport {PutObjectCommand, S3Client} from \"@aws-sdk/client-s3\";\nimport { useState } from \"react\";\nimport { nanoid } from \"nanoid\";\n\nfunction App() {\n\n  const [file, setFile] = useState(null);\n  const [inputText, setInputText] = useState('')\n\n  const handleTextInputChange = (event) => {\n      setInputText(event.target.value);\n      };\n    \nconst handleFileChange = (e) => {\n  const file = e.target.files[0];\n  setFile(file);\n};\n\n  const uploadFile = async () => {\n    const S3_BUCKET = \"infracdkstack-projects3bucketf7e4afb6-ljf45fw8yyuw\";\n\n    const REGION = \"us-west-1\";\n\n      const CREDENTIALS = {\n        accessKeyId: \"AKIARFXZJQECRGPJWSW3\",\n        secretAccessKey: \"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\"\n      }\n  \n      const s3Client = new S3Client({\n        region: REGION,\n        credentials: CREDENTIALS\n    });\n\n      console.log(file)\n      const command = new PutObjectCommand({\n          Bucket: S3_BUCKET,\n          Key: file.name,\n          Body: file\n      });\n\n      try {\n          const response = await s3Client.send(command);\n          console.log(response);\n          alert(\"File uploaded successfully.\");\n      } catch (err) {\n          console.error(err);\n          alert(\"Failed to upload file.\");\n      }\n\n    const API_PATH='https://gsnmu8gl3f.execute-api.us-west-1.amazonaws.com/prod/'\n    const dynamoDbData = {\n      id: nanoid(),\n      input_text: inputText,\n      input_file_path: `${S3_BUCKET}/${file.name}`,\n    };\n\n    const response = await fetch(API_PATH, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\":\"application/json\",\n      },\n      body: JSON.stringify(dynamoDbData),\n    });\n    console.log(response)\n    if (!response.ok) {\n      throw new Error(\"Failed to save data to DynamoDB\");\n    }\n    alert(\"File uploaded and data saved successfully!\");\n    \n  };\n  \n  return (\n    <div class=\"flex justify-center items-center h-screen\">\n    <div class=\"max-w-md w-full px-4 py-8 bg-white shadow-lg rounded-lg\">\n      <div>\n        <label htmlFor=\"inputText\" class=\"block text-gray-700\">Text input:</label>\n        <input\n          type=\"text\"\n          id=\"inputText\"\n          placeholder=\"Enter text\"\n          class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\"\n          value=\"{inputText}\"\n          onchange=\"{handleTextInputChange}\"\n        />\n      </div>\n      <div class=\"mt-4\">\n        <label htmlFor=\"fileInput\" class=\"block text-gray-700\">File input:</label>\n        <input\n          type=\"file\"\n          id=\"fileInput\"\n          accept=\".txt\"\n          onchange=\"{handleFileChange}\"\n          class=\"mt-1 block w-full border-gray-300 rounded-md shadow-sm focus:border-indigo-500 focus:ring focus:ring-indigo-200 focus:ring-opacity-50\"\n        />\n      </div>\n      <div class=\"mt-4\">\n        <button\n          type=\"submit\"\n          onclick=\"{uploadFile}\"\n          class=\"inline-block bg-indigo-500 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded focus:outline-none focus:shadow-outline\"\n        >\n          Upload\n        </button>\n      </div>\n    </div>\n  </div>\n  \n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}