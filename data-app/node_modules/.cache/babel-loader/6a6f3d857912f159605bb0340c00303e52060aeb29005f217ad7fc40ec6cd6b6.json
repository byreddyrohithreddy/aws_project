{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\byred\\\\Downloads\\\\aws-project\\\\data-app\\\\src\\\\App.js\",\n  _s = $RefreshSig$();\nimport { PutObjectCommand, S3Client } from \"@aws-sdk/client-s3\";\nimport { useState } from \"react\";\nimport { nanoid } from \"nanoid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [file, setFile] = useState(null);\n  const [inputText, setInputText] = useState('');\n  const handleTextInputChange = event => {\n    setInputText(event.target.value);\n  };\n  const handleFileChange = e => {\n    const file = e.target.files[0];\n    setFile(file);\n  };\n  const uploadFile = async () => {\n    const S3_BUCKET = \"infracdkstack-projects3bucketf7e4afb6-ljf45fw8yyuw\";\n    const REGION = \"us-west-1\";\n    const CREDENTIALS = {\n      accessKeyId: \"AKIARFXZJQECRGPJWSW3\",\n      secretAccessKey: \"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\"\n    };\n    const s3Client = new S3Client({\n      region: REGION,\n      credentials: CREDENTIALS\n    });\n    console.log(file);\n    const command = new PutObjectCommand({\n      Bucket: S3_BUCKET,\n      Key: file.name,\n      Body: file\n    });\n    try {\n      const response = await s3Client.send(command);\n      console.log(response);\n      alert(\"File uploaded successfully.\");\n    } catch (err) {\n      console.error(err);\n      alert(\"Failed to upload file.\");\n    }\n    const API_PATH = 'https://eao42r5yha.execute-api.us-west-1.amazonaws.com/prod';\n    const dynamoDbData = {\n      id: nanoid(),\n      input_text: inputText,\n      input_file_path: `${S3_BUCKET}/${file.name}`\n    };\n    const response = await fetch(API_PATH, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(dynamoDbData)\n    });\n    console.log(response);\n    if (!response.ok) {\n      throw new Error(\"Failed to save data to DynamoDB\");\n    }\n    alert(\"File uploaded and data saved successfully!\");\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"min-h-screen bg-gradient-to-br from-purple-500 to-indigo-600 flex justify-center items-center\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"bg-white p-8 rounded shadow-lg w-full max-w-md\",\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"inputText\",\n            className: \"block text-gray-700\",\n            children: \"Text input:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 78,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n            type: \"text\",\n            id: \"inputText\",\n            placeholder: \"Enter text\",\n            className: \"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 placeholder-gray-500\",\n            value: inputText,\n            onChange: handleTextInputChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 79,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"mb-6\",\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            for: \"fileInput\",\n            className: \"block text-gray-700\",\n            children: \"File input:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"relative mt-1 rounded-md shadow-sm\",\n            children: [/*#__PURE__*/_jsxDEV(\"input\", {\n              type: \"file\",\n              id: \"fileInput\",\n              accept: \".txt\",\n              className: \"absolute inset-0 w-full h-full opacity-0 cursor-pointer\",\n              onChange: handleFileChange\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 91,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              type: \"button\",\n              className: \"absolute left-0 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:bg-indigo-700\",\n              children: \"Select File\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 98,\n              columnNumber: 11\n            }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n              className: \"absolute left-1/4 flex items-center pr-4 text-gray-700\",\n              children: \"No file chosen\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 11\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 90,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex justify-end\",\n          children: /*#__PURE__*/_jsxDEV(\"button\", {\n            type: \"button\",\n            className: \"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\",\n            onClick: uploadFile,\n            children: \"Upload\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 105,\n            columnNumber: 9\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 74,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"1gXZcAHTgom0+pXkzYUjvMwzM18=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["PutObjectCommand","S3Client","useState","nanoid","jsxDEV","_jsxDEV","App","_s","file","setFile","inputText","setInputText","handleTextInputChange","event","target","value","handleFileChange","e","files","uploadFile","S3_BUCKET","REGION","CREDENTIALS","accessKeyId","secretAccessKey","s3Client","region","credentials","console","log","command","Bucket","Key","name","Body","response","send","alert","err","error","API_PATH","dynamoDbData","id","input_text","input_file_path","fetch","method","headers","body","JSON","stringify","ok","Error","className","children","for","fileName","_jsxFileName","lineNumber","columnNumber","type","placeholder","onChange","accept","onClick","_c","$RefreshReg$"],"sources":["C:/Users/byred/Downloads/aws-project/data-app/src/App.js"],"sourcesContent":["\nimport {PutObjectCommand, S3Client} from \"@aws-sdk/client-s3\";\nimport { useState } from \"react\";\nimport { nanoid } from \"nanoid\";\n\nfunction App() {\n\n  const [file, setFile] = useState(null);\n  const [inputText, setInputText] = useState('')\n\n  const handleTextInputChange = (event) => {\n      setInputText(event.target.value);\n      };\n    \nconst handleFileChange = (e) => {\n  const file = e.target.files[0];\n  setFile(file);\n};\n\n  const uploadFile = async () => {\n    const S3_BUCKET = \"infracdkstack-projects3bucketf7e4afb6-ljf45fw8yyuw\";\n\n    const REGION = \"us-west-1\";\n\n      const CREDENTIALS = {\n        accessKeyId: \"AKIARFXZJQECRGPJWSW3\",\n        secretAccessKey: \"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\"\n      }\n  \n      const s3Client = new S3Client({\n        region: REGION,\n        credentials: CREDENTIALS\n    });\n\n      console.log(file)\n      const command = new PutObjectCommand({\n          Bucket: S3_BUCKET,\n          Key: file.name,\n          Body: file\n      });\n\n      try {\n          const response = await s3Client.send(command);\n          console.log(response);\n          alert(\"File uploaded successfully.\");\n      } catch (err) {\n          console.error(err);\n          alert(\"Failed to upload file.\");\n      }\n\n    const API_PATH='https://eao42r5yha.execute-api.us-west-1.amazonaws.com/prod'\n    const dynamoDbData = {\n      id: nanoid(),\n      input_text: inputText,\n      input_file_path: `${S3_BUCKET}/${file.name}`,\n    };\n\n    const response = await fetch(API_PATH, {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\":\"application/json\",\n      },\n      body: JSON.stringify(dynamoDbData),\n    });\n    console.log(response)\n    if (!response.ok) {\n      throw new Error(\"Failed to save data to DynamoDB\");\n    }\n    alert(\"File uploaded and data saved successfully!\");\n    \n  };\n  \n  return (\n    <div className=\"min-h-screen bg-gradient-to-br from-purple-500 to-indigo-600 flex justify-center items-center\">\n    <div className=\"bg-white p-8 rounded shadow-lg w-full max-w-md\">\n    <form>\n      <div className=\"mb-6\">\n        <label for=\"inputText\" className=\"block text-gray-700\">Text input:</label>\n        <input\n          type=\"text\"\n          id=\"inputText\"\n          placeholder=\"Enter text\"\n          className=\"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-md shadow-sm focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 text-gray-700 placeholder-gray-500\"\n          value={inputText}\n          onChange={handleTextInputChange}\n        />\n      </div>\n      <div className=\"mb-6\">\n        <label for=\"fileInput\" className=\"block text-gray-700\">File input:</label>\n        <div className=\"relative mt-1 rounded-md shadow-sm\">\n          <input\n            type=\"file\"\n            id=\"fileInput\"\n            accept=\".txt\"\n            className=\"absolute inset-0 w-full h-full opacity-0 cursor-pointer\"\n            onChange={handleFileChange}\n          />\n          <button type=\"button\" className=\"absolute left-0 p-2 bg-indigo-600 text-white rounded-md hover:bg-indigo-700 focus:outline-none focus:bg-indigo-700\">\n            Select File\n          </button>\n          <p className=\"absolute left-1/4 flex items-center pr-4 text-gray-700\">No file chosen</p>\n        </div>\n      </div>\n      <div className=\"flex justify-end\">\n        <button\n          type=\"button\"\n          className=\"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-indigo-600 hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500\"\n          onClick={uploadFile}\n        >\n          Upload\n        </button>\n      </div>\n    </form>\n  </div>\n</div>\n\n  );\n}\n\nexport default App;"],"mappings":";;AACA,SAAQA,gBAAgB,EAAEC,QAAQ,QAAO,oBAAoB;AAC7D,SAASC,QAAQ,QAAQ,OAAO;AAChC,SAASC,MAAM,QAAQ,QAAQ;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAEhC,SAASC,GAAGA,CAAA,EAAG;EAAAC,EAAA;EAEb,MAAM,CAACC,IAAI,EAAEC,OAAO,CAAC,GAAGP,QAAQ,CAAC,IAAI,CAAC;EACtC,MAAM,CAACQ,SAAS,EAAEC,YAAY,CAAC,GAAGT,QAAQ,CAAC,EAAE,CAAC;EAE9C,MAAMU,qBAAqB,GAAIC,KAAK,IAAK;IACrCF,YAAY,CAACE,KAAK,CAACC,MAAM,CAACC,KAAK,CAAC;EAChC,CAAC;EAEP,MAAMC,gBAAgB,GAAIC,CAAC,IAAK;IAC9B,MAAMT,IAAI,GAAGS,CAAC,CAACH,MAAM,CAACI,KAAK,CAAC,CAAC,CAAC;IAC9BT,OAAO,CAACD,IAAI,CAAC;EACf,CAAC;EAEC,MAAMW,UAAU,GAAG,MAAAA,CAAA,KAAY;IAC7B,MAAMC,SAAS,GAAG,oDAAoD;IAEtE,MAAMC,MAAM,GAAG,WAAW;IAExB,MAAMC,WAAW,GAAG;MAClBC,WAAW,EAAE,sBAAsB;MACnCC,eAAe,EAAE;IACnB,CAAC;IAED,MAAMC,QAAQ,GAAG,IAAIxB,QAAQ,CAAC;MAC5ByB,MAAM,EAAEL,MAAM;MACdM,WAAW,EAAEL;IACjB,CAAC,CAAC;IAEAM,OAAO,CAACC,GAAG,CAACrB,IAAI,CAAC;IACjB,MAAMsB,OAAO,GAAG,IAAI9B,gBAAgB,CAAC;MACjC+B,MAAM,EAAEX,SAAS;MACjBY,GAAG,EAAExB,IAAI,CAACyB,IAAI;MACdC,IAAI,EAAE1B;IACV,CAAC,CAAC;IAEF,IAAI;MACA,MAAM2B,QAAQ,GAAG,MAAMV,QAAQ,CAACW,IAAI,CAACN,OAAO,CAAC;MAC7CF,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC;MACrBE,KAAK,CAAC,6BAA6B,CAAC;IACxC,CAAC,CAAC,OAAOC,GAAG,EAAE;MACVV,OAAO,CAACW,KAAK,CAACD,GAAG,CAAC;MAClBD,KAAK,CAAC,wBAAwB,CAAC;IACnC;IAEF,MAAMG,QAAQ,GAAC,6DAA6D;IAC5E,MAAMC,YAAY,GAAG;MACnBC,EAAE,EAAEvC,MAAM,CAAC,CAAC;MACZwC,UAAU,EAAEjC,SAAS;MACrBkC,eAAe,EAAG,GAAExB,SAAU,IAAGZ,IAAI,CAACyB,IAAK;IAC7C,CAAC;IAED,MAAME,QAAQ,GAAG,MAAMU,KAAK,CAACL,QAAQ,EAAE;MACrCM,MAAM,EAAE,MAAM;MACdC,OAAO,EAAE;QACP,cAAc,EAAC;MACjB,CAAC;MACDC,IAAI,EAAEC,IAAI,CAACC,SAAS,CAACT,YAAY;IACnC,CAAC,CAAC;IACFb,OAAO,CAACC,GAAG,CAACM,QAAQ,CAAC;IACrB,IAAI,CAACA,QAAQ,CAACgB,EAAE,EAAE;MAChB,MAAM,IAAIC,KAAK,CAAC,iCAAiC,CAAC;IACpD;IACAf,KAAK,CAAC,4CAA4C,CAAC;EAErD,CAAC;EAED,oBACEhC,OAAA;IAAKgD,SAAS,EAAC,+FAA+F;IAAAC,QAAA,eAC9GjD,OAAA;MAAKgD,SAAS,EAAC,gDAAgD;MAAAC,QAAA,eAC/DjD,OAAA;QAAAiD,QAAA,gBACEjD,OAAA;UAAKgD,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBjD,OAAA;YAAOkD,GAAG,EAAC,WAAW;YAACF,SAAS,EAAC,qBAAqB;YAAAC,QAAA,EAAC;UAAW;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1EtD,OAAA;YACEuD,IAAI,EAAC,MAAM;YACXlB,EAAE,EAAC,WAAW;YACdmB,WAAW,EAAC,YAAY;YACxBR,SAAS,EAAC,6KAA6K;YACvLtC,KAAK,EAAEL,SAAU;YACjBoD,QAAQ,EAAElD;UAAsB;YAAA4C,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACjC,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACC,CAAC,eACNtD,OAAA;UAAKgD,SAAS,EAAC,MAAM;UAAAC,QAAA,gBACnBjD,OAAA;YAAOkD,GAAG,EAAC,WAAW;YAACF,SAAS,EAAC,qBAAqB;YAAAC,QAAA,EAAC;UAAW;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAO,CAAC,eAC1EtD,OAAA;YAAKgD,SAAS,EAAC,oCAAoC;YAAAC,QAAA,gBACjDjD,OAAA;cACEuD,IAAI,EAAC,MAAM;cACXlB,EAAE,EAAC,WAAW;cACdqB,MAAM,EAAC,MAAM;cACbV,SAAS,EAAC,yDAAyD;cACnES,QAAQ,EAAE9C;YAAiB;cAAAwC,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAC5B,CAAC,eACFtD,OAAA;cAAQuD,IAAI,EAAC,QAAQ;cAACP,SAAS,EAAC,oHAAoH;cAAAC,QAAA,EAAC;YAErJ;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAQ,CAAC,eACTtD,OAAA;cAAGgD,SAAS,EAAC,wDAAwD;cAAAC,QAAA,EAAC;YAAc;cAAAE,QAAA,EAAAC,YAAA;cAAAC,UAAA;cAAAC,YAAA;YAAA,OAAG,CAAC;UAAA;YAAAH,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OACrF,CAAC;QAAA;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACH,CAAC,eACNtD,OAAA;UAAKgD,SAAS,EAAC,kBAAkB;UAAAC,QAAA,eAC/BjD,OAAA;YACEuD,IAAI,EAAC,QAAQ;YACbP,SAAS,EAAC,gOAAgO;YAC1OW,OAAO,EAAE7C,UAAW;YAAAmC,QAAA,EACrB;UAED;YAAAE,QAAA,EAAAC,YAAA;YAAAC,UAAA;YAAAC,YAAA;UAAA,OAAQ;QAAC;UAAAH,QAAA,EAAAC,YAAA;UAAAC,UAAA;UAAAC,YAAA;QAAA,OACN,CAAC;MAAA;QAAAH,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,OACF;IAAC;MAAAH,QAAA,EAAAC,YAAA;MAAAC,UAAA;MAAAC,YAAA;IAAA,OACJ;EAAC;IAAAH,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,OACH,CAAC;AAGN;AAACpD,EAAA,CAhHQD,GAAG;AAAA2D,EAAA,GAAH3D,GAAG;AAkHZ,eAAeA,GAAG;AAAC,IAAA2D,EAAA;AAAAC,YAAA,CAAAD,EAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}